安装 VirtualBox
---------------------------------------------------------------------------------------------------------
下载 https://www.virtualbox.org/wiki/Downloads

---------------------------------------------------------------------------------------------------------
安装 Vagrant
---------------------------------------------------------------------------------------------------------

---------------------------------------------------------------------------------------------------------
导入 Homestead Box 虚拟机盒子
---------------------------------------------------------------------------------------------------------
Homestead 利用 Vagrantfile 提供的便利，定制了一整套的可配置、可移植和复用的 Laravel 开发环境。Homestead 虚拟机里面包含了 Nginx Web 服务器、PHP 7.0、MySQL、Postgres、Redis、Memcached、Node，以及所有你在使用 Laravel 开发时需要用到的各种软件。

Homestead 包含了两个东西：

Homestead 管理脚本；			
Homestead Box 虚拟机盒子。  官网地址 https://app.vagrantup.com/laravel/boxes/homestead 

先下载到本地再通过vagrant安装   http://download.fsdhub.com/lt-homestead-3-0-0-2017082400.zip

在解压目录中 lt-homestead-3-0-0-2017082400 运行以下命令导入 Box：

> vagrant box add metadata.json

---------------------------------------------------------------------------------------------------------
安装 Git
---------------------------------------------------------------------------------------------------------

---------------------------------------------------------------------------------------------------------
安装 Homestead 管理脚本
---------------------------------------------------------------------------------------------------------

接下来，使用 Git 下载定制版的 Homestead：

> git clone https://git.coding.net/summerblue/homestead.git Homestead

下载完成之后我们使用命令行进入 Homestead 目录，再使用 Git 检出我们需要的 Homestead 版本：

> cd ~/Homestead
> git checkout v5.4.0

接下来我们需要初始化 Homestead：

> bash init.sh

运行以上命令后，会在 ~/Homestead 目录下生成以下三个文件：

Homestead.yaml - 主要配置信息文件，我们可以在此文件中配置 Homestead 的站点和数据库等信息；
after.sh - 每一次 Homestead 盒子重置后（provision）会调用的 shell 脚本文件；
aliases - 每一次 Homestead 盒子重置后（provision），会被替换至虚拟机的 ~/.bash_aliases 文件中，aliases 里可以放一些快捷命令的定义。

---------------------------------------------------------------------------------------------------------
配置 Homestead.yaml 文件
---------------------------------------------------------------------------------------------------------
Homestead.yaml里的配置大致可以分为以下几种：

虚拟机设置；
SSH 秘钥登录配置；
共享文件夹配置；
站点配置；
数据库配置；
自定义变量；

1. 虚拟机设置

Homestead 支持我们对虚拟机的 IP，内存，CPU，虚拟机的默认提供者进行配置。这里我们基本不需要做任何配置，因此可以跳过。

ip: "192.168.10.10"
memory: 2048
cpus: 1
provider: virtualbox


2. SSH 秘钥登录配置

authorize 选项是指派登录虚拟机授权连接的公钥文件，此文件填写的是主机上的公钥文件地址，虚拟机初始化时，此文件里的内容会被复制存储到虚拟机的 /home/vagrant/.ssh/authorized_keys文件中，从而实现 SSH 免密码登录。在这里我们默认填写即可。

authorize: ~/.ssh/id_rsa.pub

keys 是数组选项，填写的是本机的 SSH 私钥文件地址。虚拟机初始化时，会将此处填写的所有 SSH 私钥文件复制到虚拟机的 /home/vagrant/.ssh/ 文件夹中，从而使虚拟机能共享主机上的 SSH 私钥文件，使虚拟机具备等同于主机的身份认证。（ SSH Key没有的话先用ssh-keygen -t rsa -C "your_email@example.com" 生死公私钥）

此处我们将公钥和私钥一起同步到虚拟机中：

keys:
    - ~/.ssh/id_rsa
    - ~/.ssh/id_rsa.pub

3. 共享文件夹配置

我们可以通过 folders 来指明本机要映射到 Homestead 虚拟机上的文件夹。

map 对应的是我们本机的文件夹，格式例如：E：/Homestead/Code，以开发者实际项目目录为准。
to 对应的是 Homestead 上的文件夹。

4. 站点配置

站点配置允许你在主机里，通过域名来访问虚拟机里的 Laravel 应用。如下面 sites 配置所示，将 homestead.test 映射到一个 Laravel 项目的 public 目录上。这一行配置，会命令 Homestead 为我们新建一个 Nginx 站点，并且把 Web Root 配置到指定目录下。Laravel 应用的 Nginx 站点 Web Root 配置，默认就是在根目录下的 public 目录。
sites:
    - map: homestead.test				（域名）
      to: /home/vagrant/Code/Laravel/public		//映射文件夹


5. 数据库配置

我们可以为 Homestead 指定数据库名称，这里使用默认设置即可。

databases:
    - homestead
---------------------------------------------------------------------------------------------------------
启动 Homestead 虚拟机
---------------------------------------------------------------------------------------------------------

命令行	说明
vagrant init	初始化 vagrant
vagrant up	启动 vagrant
vagrant halt	关闭 vagrant
vagrant ssh	通过 SSH 登录 vagrant（需要先启动 vagrant）
vagrant provision	重新应用更改 vagrant 配置
vagrant destroy	删除 vagrant

让我们开始启动 Homestead：

> cd ~/Homestead && vagrant up	
第一次启动时，Vagrant 会做以下这几件事情：		注：启动会安装only-host网络模式，需要同意创建虚拟网卡

以导入的 Homestead 虚拟机盒子为模板，新建一台虚拟机；
并按照 Homestead.yaml 里的配置信息，对这台新建的虚拟机进行配置；
配置完成后启动虚拟机。
成功启动后，还是在 ~/Homestead 目录中，通过以下命令来 SSH 登录 Homestead 虚拟机中：

> vagrant ssh
在我们登录成功后，你能看到类似于如下图的界面，现在我们在该终端界面中输入的所有命令都将运行在 Homestead 虚拟机上。
注：这个自定义hosmestead虚拟机登陆用户名是：vagrant 

在虚拟机界面下可以输入退出虚拟机：

$ exit
最后尝试关闭 Homestead：

> vagrant halt


创建root密码 ：
sudo passwd root
输入2次密码即可， 
su root //切换用户