AetherUpload - 让 Laravel 支持超大文件断点上传


用法

0) 在终端内切换到你的laravel项目根目录，执行composer require peinhu/aetherupload-laravel dev-master

1) 在config/app.php的providers数组中添加一行Peinhu\AetherUpload\AetherUploadServiceProvider::class,

2) 执行php artisan vendor:publish来发布一些文件和目录

3) 赋予上传目录相应权限，在项目根目录下，执行chmod 755 storage/app/uploads -R

4) 在浏览器访问http://域名/aetherupload可到达示例页面

提示：更改相关配置选项请编辑config/aetherupload.php。

优化建议

（推荐）设置每天自动清除无效文件。
由于上传流程存在意外终止的情况，如在传输过程中强行关闭页面或浏览器，将会导致已产生的临时文件成为无效文件，占据大量的存储空间，我们可以使用Laravel的任务调度功能来定期清除它们。
在Linux中运行crontab -e命令，确保文件中包含这行代码：
* * * * * php /项目根目录的绝对路径/artisan schedule:run 1>> /dev/null 2>&1
在app/Console/Kernel.php中的schedule方法中添加以下代码：
$schedule->call(function () {
  (new \Peinhu\AetherUpload\Uploader())->cleanUpDir();
})->daily();
提高临时文件读写速度。
利用Linux的tmpfs文件系统，来达到将临时文件放到内存中快速读写的目的。执行以下命令：
mkdir /dev/shm/tmp
chmod 1777 /dev/shm/tmp
mount --bind /dev/shm/tmp /tmp